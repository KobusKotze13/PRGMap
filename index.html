<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>


    <link rel="icon" href="./images/prglogo.png">

    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />


    <link rel="stylesheet" href="./CSS/styling.css"/>

   


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.79.0/dist/L.Control.Locate.min.css" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <title>Paul Roos Map</title>
</head>
<body>


    <nav class="navbar navbar-expand-lg navbar-dark custom-navbar">
        <a class="navbar-brand" href="https://paulroos.co.za"><img src="./images/display.png" alt="Logo" height="40" 
            class="d-inline-block align-top">Paul Roos Gymnasium </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
      
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
              <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Dropdown
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Something else here</a>
              </div>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#">Disabled</a>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
          </form>
        </div>
      </nav>

      <br>

    <!-- <h1>PAUL ROOS:</h1> -->

    <div id="flag1"></div>
    <div id="flag2"></div>

    <div id="flag3"></div>



    <!-- Map container -->
    <div id="map-container">
        <!-- Leaflet map container -->
        <div id="map"></div>
    </div>
    



    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""></script>

    <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.79.0/dist/L.Control.Locate.min.js" charset="utf-8"></script>

</body>

<script>
var map = L.map('map');
map.setView([-33.9419, 18.8614], 19);

L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 25, minZoom: 15,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
}).addTo(map);

var customIcon = L.icon({
    iconUrl: './images/display.png',
    iconSize: [40, 40], // Size of the icon
    iconAnchor: [20, 40], // Point of the icon which will correspond to marker's location
    popupAnchor: [0, -40] // Point from which the popup should open relative to the iconAnchor
});

var customPopupOptions = {
    maxWidth: "400", // Max width of the popup
    minWidth: "220", // Min width of the popup
    maxHeight: "auto", // Max height of the popup
    autoPan: true, // Automatically pan the map to display the popup
    autoPanPadding: [50, 50], // Padding for the autoPan
    className: 'custom-popup' // Add a custom class for styling
};


// LPR GEBOU
let LPRMarker = L.marker([-33.9419,18.8614]).addTo(map)
    .bindPopup("<h1> LPR Gebou | Building </h1> <hr>" +
    "<img class='popupimages' src='./images/LPR.jpg'/ height='150px'>" +
    " <br> <a href='./Pages/LPR.html'><button class='button-44' role='button'>View Info</button></a>", customPopupOptions);


//HOOF GEBOU
let HoofGebouMarker = L.marker([-33.941483, 18.862473]).addTo(map)
.bindPopup("<h1> Paul Roos Hoofgebou | Main Building </h1>" + 
 " <img class='popupimages' src='./images/PRG Hoofgebou.jpg'/ height='150px'>" +
 " <br> <a href='./Pages/HoofGebou.html'><button class='button-44' role='button'>View Info</button></a>", customPopupOptions);


// CENTRE
let PRGCentre = L.marker([-33.942859, 18.861336]).addTo(map)
.bindPopup("<h1> PRG Sentrum | Centre </h1>" + 
"<img class='popupimages' src='./images/PRG Centre.jpg'/ height='150px'>" +
"<br> <a href='./Pages/PRGCentre.html'><button class='button-44' role='button'>View Info</button></a>", customPopupOptions);


//NOVA KOSHUIS
let PRGNova = L.marker([-33.941120, 18.863475]).addTo(map)
.bindPopup("<h1> Prima Nova </h1> " +
"<img class='popupimages' src='./images/Prima Nova.jpg'/ height='150px'>" +
"<br> <a href='./Pages/Nova.html'><button class='button-44' role='button'>View Info</button></a>", customPopupOptions);


//SECUNDA KOSHUIS
let PRGSecunda = L.marker([-33.941348, 18.863656]).addTo(map)
.bindPopup("<h1> Secunda Hostel </h1>" +
 "<img class='popupimages' src='./images/Secunda.jpg'/ height='150px'>" +
 "<br> <a href='./Pages/secunda.html'><button class='button-44' role='button'>View Info</button></a>" , customPopupOptions);


// PRIMA
let PRGPrima = L.marker([-33.9405446163602, 18.86462771038144]).addTo(map)
.bindPopup("<h1> Prima </h1>" + 
"<img class='popupimages' src='./images/Prima.jpg'/ height='150px'>" +
"<br> <a href='./Pages/Prima.html'><button class='button-44' role='button'>View Info</button></a>" ,customPopupOptions);


// Japie Krige Hall
let JapieKrige = L.marker([-33.941798939373975, 18.86195393855647]).addTo(map)
.bindPopup("<h1> Japie Krige Saal | Hall </h1>" + 
"<img class='popupimages' src='./images/Japie Krige Saal.jpg'/ height='150px'>" +
"<br> <a href='./Pages/JapieKrige.html'><button class='button-44' role='button'>View Info</button></a>", customPopupOptions);

// Kamer 14
let Kamer14 = L.marker([-33.941671, 18.862312]).addTo(map)
.bindPopup("<h1> Kamer 14 </h1>" +
"<img class='popupimages' src='./images/Room 14.jpg'/ height='150px'>" +
"<br> <a href='./Pages/Room14.html'><button class='button-44' role='button'>View Info</button></a>", customPopupOptions);

// Performance Institute
let PerformanceInstitute = L.marker([-33.94186362464865, 18.864021447241385]).addTo(map)
.bindPopup("<h1> Johan J Ferreira HoÃ«-Prestasiesentrum | High Performance Centre  </h1>" + 
"<img class='popupimages' src='./images/High Performance Centre inside.jpg'/ height='150px'>" +
"<br> <a href='./Pages/PerformanceInstitute.html'><button class='button-44' role='button'>View Info</button></a>", customPopupOptions)






//Current user location
 if (!navigator.geolocation.getCurrentPosition){
    console.log("Your browser doesn't support the geolocation feature");
 } else {
    setInterval(() => {
        navigator.geolocation.getCurrentPosition(getPosition)
    }, 1000)
    //Original interval = 5000
 }

 var
 UserMarker, UserRadius;

 function getPosition(position){
 console.log(position);
 var lat = position.coords.latitude;
 var long = position.coords.longitude;
 var accuracy = position.coords.accuracy;

 console.log(lat, long, accuracy);

 if (UserMarker){
    map.removeLayer(UserMarker)
 }

 if (UserRadius){
    map.removeLayer(UserRadius)
 }

  UserMarker = L.marker([lat,long], {icon: customIcon}).addTo(map);
  UserRadius = L.circle([lat, long], {radius: accuracy}).addTo(map);
 console.log("It should have added");
 }






//-33.941610, 18.862611

// L.Routing.control({
//   waypoints: [
//     L.latLng(-33.9419, 18.8614),
//     L.latLng(-33.941610,18.862611)
//   ]
// }).addTo(map);




// navigator.geolocation.watchPosition(success,error);
// let marker;

//  function success(pos){
   
//     const lat = pos.coords.latitude;
//     const lng = pos.coords.longtitude;
//     // const accuracy = pos.coords.accuracy;
    
//     marker = L.marker([lat, lng]).addTo(map);
//     alert("This code executed");
 

//  }

//  function error(err){
//     if (err.code === 1){
//         alert("Please allow geolocation access");
//     } else {
//         alert("Cannot get current location");
//     }
//  }

</script>
</html>
